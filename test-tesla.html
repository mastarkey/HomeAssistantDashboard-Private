<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tesla Wall Connector Debug</title>
    <style>
        body {
            font-family: monospace;
            background: #111;
            color: #0f0;
            padding: 20px;
        }
        pre {
            background: #000;
            padding: 10px;
            border: 1px solid #0f0;
            overflow: auto;
        }
        h2 {
            color: #f0f;
        }
        .warning {
            color: #ff0;
        }
        .error {
            color: #f00;
        }
        .success {
            color: #0f0;
        }
    </style>
</head>
<body>
    <h1>Tesla Wall Connector Debug Test</h1>
    
    <h2>Test Results:</h2>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = type;
            div.textContent = `[${new Date().toISOString()}] ${message}`;
            results.appendChild(div);
        }
        
        // Test 1: Check if Tesla entities are in localStorage
        log('Test 1: Checking localStorage for Tesla entities...');
        const entityOverrides = localStorage.getItem('entity_overrides');
        if (entityOverrides) {
            const overrides = JSON.parse(entityOverrides);
            const teslaOverrides = Object.entries(overrides).filter(([id]) => 
                id.toLowerCase().includes('tesla')
            );
            if (teslaOverrides.length > 0) {
                log(`Found ${teslaOverrides.length} Tesla entity overrides`, 'success');
                teslaOverrides.forEach(([id, override]) => {
                    log(`  ${id}: room=${override.room}`, 'info');
                });
            } else {
                log('No Tesla entity overrides found', 'warning');
            }
        }
        
        // Test 2: Check console for debug logs
        log('Test 2: Check browser console for [DEBUG] logs', 'info');
        log('Look for:', 'info');
        log('  - [DEBUG] FORCE SHOWING Tesla entity', 'info');
        log('  - [DEBUG] EntityCard rendering Tesla entity', 'info');
        log('  - [DEBUG] Using EVChargerCard', 'info');
        
        // Test 3: Instructions
        log('', 'info');
        log('Test 3: Manual verification steps:', 'warning');
        log('1. Open the React dashboard', 'info');
        log('2. Click on "Other" room', 'info');
        log('3. Check if Tesla Wall Connector appears', 'info');
        log('4. If not, open Add Device modal and search for "tesla"', 'info');
        log('5. Select Tesla Wall Connector and assign to Other room', 'info');
        log('6. Check console for any error messages', 'info');
    </script>
</body>
</html>